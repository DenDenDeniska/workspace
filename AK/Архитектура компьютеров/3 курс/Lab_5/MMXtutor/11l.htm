<!doctype html> 
<HTML>
<HEAD>
<meta charset="utf-8" />
<TITLE>Topic 11</TITLE>
</HEAD>
<BODY BGCOLOR="#CCCCCC">
<SCRIPT language="JavaScript">
<!--
if (document.location==parent.document.location)
document.write("<CENTER><H3>This page is part of the Introduction to MMX&#153; Technology tutorial. To start the tutorial, please open the MMXSTART.HTM page in the same directory!</H3></CENTER>")
//-->
</SCRIPT>

MMX-команды исполняются в том же режиме процессора, что и команды
с плавающей запятой. Поэтому при исполнении всех MMX-команд 
(кроме <font color="#000099"><TT>EMMS</TT></font>) "портится" слово состояния регистров с плавающей запятой.
Команда <font color="#000099"><TT>EMMS</TT></font> обеспечивает переход процессора от исполнения MMX-команд к 
исполнению обычных команд с плавающей запятой: она устанавливает 
значение 1 во всех разрядах слова состояния.

Заканчивайте командой <font color="#000099"><TT>EMMS</TT></font> любой фрагмент программы, в котором есть 
MMX-команды. Если этого не делать, то 
<UL>
<LI>операции с плавающей запятой будут давать неверные результаты;
<LI>иногда в результате операций с плавающей запятой будут генерироваться 
исключения типа <B>Stack overflow</B>.
</UL>

Справа вверху Вы видите фрагмент программы, в котором непосредственно 
за командой <TT>movq</TT> следует вызов процедуры, использующей 
операции с плавающей запятой. В результате возникает 
исключение <B>Stack overflow</B>.

Внизу показан тот же фрагмент программы, в который вставлена команда
<font color="#000099"><TT>EMMS</TT></font>. Здесь переполнения стека не возникает.





</BODY>
</HTML>

