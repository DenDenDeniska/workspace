<!doctype html>
<head>
   <meta charset="windows-1251">
   <title>Изучение архитектуры шин компьютера</title>
<link rel=stylesheet href="../style.css">
</head>
<body>
<a href="../index.html">Содержание</a>
<h1>Лабораторная работа 4. Изучение архитектуры шин компьютера</h1>

<p><a href="#Цель работы">4.1. Цель работы</a></p>
<p><a href="#Методические указания по организации">4.2. Методические указания по организации самостоятельной работы студентов</a></p>
<ul>
<li><a href="#Системная шина">Системная шина</a></li>
<li><a href="#Шина кэш-памяти">Шина кэш-памяти</a></li>
<li><a href="#Шина памяти">Шина памяти</a></li>
<li><a href="#Шины">Шины ввода/вывода</a></li>
<li><a href="#Архитектура">Архитектура любой шины</a></li>
<li><a href="#Контроллер">Контроллер шины</a></li>
<li><a href="#Пропускная способность">Пропускная способность шины.</a></li>
<li><a href="#Системные шины">Системные шины.</a></li>
<li><a href="#Шины">Шины ввода/вывода.</a></li>
<li><a href="#Шина PCI">Шина PCI.</a></li>
<li><a href="#PCI-X">Шина PCI-X.</a></li>
<li><a href="#PCIe">Шина PCI Express.</a></li>
<li><a href="#AGP">Шина AGP</a></li>
<li><a href="#USB">Шина USB.</a></li>
<li><a href="#Шина SCSI">Шина SCSI.</a></li>
</ul>
<p><a href="#Описание лабораторной установки">4.3. Описание лабораторной установки</a></p>
<p><a href="#Порядок выполнения работы и методические">4.4. Порядок выполнения работы и методические указания по ее выполнению</a></p>
<p><a href="#Содержание отчета">4.5. Содержание отчета</a></p>
<p><a href="#Контрольные вопросы и задания">4.6. Контрольные вопросы и задания</a></p>

<h2><a name="Цель работы"></a>4.1. Цель работы</h2>
<p>Изучение архитектуры шин компьютера, их назначение, характеристики
и применение. Разработка схемы подключения устройств компьютера (процессора,
памяти, модулей ввода/вывода и периферийных устройств) к шинам.</p>

<h2><a name="Методические указания по организации"></a>4.2. Методические указания по организации самостоятельной работы студентов</h2>
<p><em>Шиной (Bus)</em> называется совокупность линий (проводников на материнской плате), по которым обмениваются данными компоненты и устройства PC (рис. 4.1). Шина предназначена для обмена данными между двумя и более устройствами. Шина, связывающая только два устройства, называется <em>портом</em>.</p>
<p>Обычно шина имеет места для подключения внешних устройств, которые в результате сами становятся частью шины и могут обмениваться данными со всеми другими подключенными к ней устройствами.</p>

<p class="center"><img src="image_1_1.png" width="480" />

<p class="center">Рисунок 4.1 - Архитектура шин компьютера</p>

<p>Линии шины делятся на три группы в зависимости
от типа передаваемых данных:</p>
<ul>
<li>линии данных (шина данных);</li>
<li>линии адреса (шина адреса);</li>
<li>линии управления (шина управления).</li>
</ul>
<p>Наличие трех групп линий является отличительным признаком
шины от других систем соединения.</p>
<p>Шины в PC различаются по своему функциональному назначению.</p>
<p><a name="Системная шина"></a><em>Системная шина</em> (или Front Side шина) используется микросхемами Chipset для пересылки данных к и от CPU.</p>
<p><a name="Шина памяти"></a><em>Шина памяти</em> используется для обмена данными между оперативной памятью и CPU.</p>
<p><em>PCI Express</em>, или PCIe, или PCI-E (также известная как 3GIO for 3rd Generation I/O; не путать с PCI-X и PXI) — компьютерная шина (хотя на физическом уровне шиной не является, будучи соединением типа «точка-точка»), использующая программную модель шины PCI и высокопроизводительный физический протокол, основанный на последовательной передаче данных.
</p>
<p>До появления стандарта PCI-E при обработке трехмерных изображений  широко использовалась разработанная корпорацией Intel шина <em>AGP (Accelerated Graphics Port)</em>. Фактически шина AGP является портом, т. к. она предназначена для обмена информацией только между двумя устройствами.</p>
<p><a name="Шины"></a><em>Шины ввода/вывода</em>, которые подразделяются на стандартные и локальные.</p>
<p><em>Локальная шина ввода/вывода</em> — это скоростная шина, предназначенная для обмена данными между быстродействующими периферийными устройствами (видеоадаптерами, сетевыми
картами, картами сканера и др.) и системной шиной под управлением Chipset. В настоящее время в качестве этой шины используется шина PCI. Ранее применялись шины ISA и VLB.</p>
<p><em>Стандартная шина ввода/вывода</em> используется для подключения к вышеперечисленным шинам более медленных устройств (например, мыши, клавиатуры, модемов, старых звуковых карт). До недавнего времени в качестве этой шины использовалась шина стандарта <em>ISA</em>. В настоящее время в соответствии со спецификациями PC 98, PC 99 и PC 2001 им на смену пришли шины <em>LPC</em> (Low Pin Count), USB.</p>
<p>Этим списком не исчерпывается весь набор шин PC. В зависимости от своего функционального назначения современные PC могут быть оборудованы такими шинами, как <em>USB, SCSI, FireWire</em>, которые устанавливаются в слоты расширения или интегрированы в материнскую плату. Их работу обеспечивает соответствующий контроллер.
<h4>Назначение линий шины</h4>
</p>Шина имеет собственную архитектуру, позволяющую
реализовать важнейшие ее свойства — возможность параллельного подключения
практически неограниченного числа внешних устройств и обеспечение обмена
данными между ними.</p>
<a name="Архитектура"></a><em>Архитектура любой шины</em> включает компоненты, перечисленные ниже.</p>
<ul>
<li>Линии для обмена данными (шины данных);</li>
<li>Линии для адресации данных (шины адреса);</li>
<li>Линии для управления данными (шины управления);</li>
<li>Контроллер шины.</li>
</ul>
<p><a name="Контроллер"></a><em>Контроллер шины</em> осуществляет управление процессом обмена данными и служебными сигналами и обычно выполняется в виде отдельной микросхемы либо интегрируется в микросхемы Chipset. Например, контроллер Chipset i440BX шины PCI интегрирован в микросхему 82443ВХ.

<p><em>Шина данных</em>. По этой шине происходит обмен данными между CPU, картами расширения, установленными в слоты, и памятью. Особую роль при этом играет так называемый режим <em>DMA (Direct Memory Access)</em>. Управление обменом данными в этом режиме
осуществляется соответствующим контроллером, минуя CPU. <em>DMA-контроллер</em>, реализованный ранее на микросхеме 82С206, в настоящее время интегрируется в одну из микросхем Chipset, например 82443ВХ.</p>
<p>Чем выше разрядность шины, тем больше данных может быть передано за определенный промежуток времени и тем выше будет производительность PC.</p>
<p>Компьютеры с процессором 80286 имели 16-разрядную шину данных, с CPU 80386 i 80486 — 32-разрядную, а компьютеры с CPU семейства Pentium имеют уже 64-разрядную шину данных.

<h4>Шина адреса</h4>
Процесс обмена данными возможен лишь в том случае, когда известен отправитель
и получатель этих данных. Каждый компонент PC, каждый регистр ввода/вывода
и ячейка RAM имеют свой адрес и входят в общее адресное пространство PC.
Для адресации к какому-либо устройству PC и служит шина адреса, по которой
передается уникальный идентификационный код (адрес).
Для ускорения обмена данными используется устройство промежуточного
хранения данных — RAM, при этом решающую роль играет объем данных, которые
могут временно храниться в ней. Объем зависит от разрядности адресной шины
(числа линий) и, тем самым, от максимально возможного количества адресов,
генерируемых процессором на адресной шине, иными словами, от количества
ячеек RAM, вторым может быть присвоен адрес. Очевидно, что количество ячеек
RAM не должно превышать 2<i><sup>n</sup></i>, где <i>n</i>— разрядность
адресной шины. В противном случае часть ячеек не будет использоваться,
поскольку процессор не сможет адресоваться к ним.
<p class="center"><em>Объем адресуемой памяти = 2<sup>n</sup></em>,</p>
<p class="center">где <i>n</i>— число линий шины адреса.
<p>Процессор 8088, например, имел 20 адресных линий
и мог, таким образом, адресовать память объемом 1 Мбайт (2<sup>20</sup> = 1 048 576
байт = 1024 Кбайт). В PC с процессором 80286 разрядность адресной шины
была увеличена до 24 бит, а современные процессоры 80486, Pentium, Pentium
MMX и Pentium II имеют уже 32-разрядную шину адреса, с помощью которой
можно адресовать 4 Гбайт (2<sup>32</sup> байт) памяти.</p>

<h4>Шина управления</h4>
<p>Для успешной передачи данных не достаточно установить их на шине данных
и задать адрес на шине адреса. Для того чтобы данные были записаны (считаны)
в регистры устройств, подключенных к шине, адреса которых указаны на шине
адреса, необходим ряд служебных сигналов: записи/считывания, готовности
к приему/передаче данных, подтверждения приема данных, аппаратного прерывания,
управления и инициализации контроллера DMA и др. Все эти сигналы передаются
по шине управления.</p>

<h4>Разрядность шины</h4>
<p>Важнейшей характеристикой шины является разрядность шины (иногда говорят
ширина шины), которая определяется количеством данных, параллельно "проходящих"
через нее. Здесь и в самом деле напрашивается прямое сравнение с автобусом
(bus — автобус, шина). Чем больше в автобусе посадочных мест, тем больше
людей можно в нем перевезти.</p>

<p>Первая шина ISA для IBM PC была 8-разрядной, т. е. по ней можно было одновременно передавать лиши 8 бит. Шина ISA — 16-разрядная, а шины ввода/вывода VLB и PCI — 32-разрядные. Системные шины современных PC на базе процессоров пятого и шестого поколения — 64-разрядные.</p>

<p><a name="Пропускная способность"></a><em>Пропускная способность шины.</em> Второй характеристикой шины является пропускная способность, которая определяется количеством бит информации, передаваемых по шине за секунду.</p>
<p>Для определения пропускной способности шины необходимо умножить тактовую частоту шины на ее разрядность. Например, для 16-разрядной шины ISA пропускная способность определяется так:</p>
<p class="center">(16 бит х 8,33 МГц) : 8 = (133,28 Мбит/с) : 8 = 16,66 Мбайт/с.</p>

</p>Отметим, что при расчете пропускной способности, например
шины AGP, следует учитывать режим ее работы: благодаря увеличению в 2 раза
тактовой частоты видео процессора и изменению протокола передачи данных
удалось повысить пропускную способность шины в 2 (режим 2х) или в 4 (режим
4х) раза, что эквивалентно увеличению тактовой частоты шины в соответствующее
количество раз (до 133 и 266 МГц соответственно). В табл. 4.1 представлены
характеристики некоторых шин ввода/вывода.</p>
<p>Таблица 4.1 - Характеристики шин ввода/вывода</p>

<table class="center" cols="4" width="90%" >
<tr>
<th>Шина</th>
<th>Разрядность, бит</th>
<th>Тактовая частота, МГц</th>
<th>Пропускная способность, Мбайт/с</th>
</tr>
<tr>
<td>ISA 8-разрядная</td>
<td>8</td>
<td>8,33</td>
<td>8,33</td>
</tr>
<tr>
<td>ISA 16-разрядная</td>
<td>16</td>
<td>8,33</td>
<td>16,6</td>
</tr>
<tr>
<td>EISA</td>
<td>32</td>
<td>8,33</td>
<td>33,3</td>
</tr>
<tr>
<td>VLB</td>
<td>32</td>
<td>33</td>
<td>264</td>
</tr>
<tr>
<td>PCI</td>
<td>32 / 64</td>
<td>33</td>
<td>132 / 264</td>
</tr>
<tr>
<td>PCI 2.1 64-разрядная</td>
<td>64</td>
<td>66</td>
<td>528,3</td>
</tr>
<tr>
<td>PCI-X 1.0</td>
<td>64</td>
<td>100<br />133</td>
<td>800<br />1 064</td>
</tr>
<tr>
<td>PCI-X 2.0</td>
<td>64</td>
<td>266<br />533</td>
<td>2 128<br />4 264</td>
</tr>
<tr>
<td>PCI-E 1.0</td>
<td>x1<br />x16</td>
<td>2500 (код 8b/10b)</td>
<td>250<br />4 000</td>
</tr>
<tr>
<tr>
<td>PCI-E 2.0</td>
<td>x1<br />x16</td>
<td>5000 (код 8b/10b)</td>
<td>500<br />8 000</td>
</tr>
<tr>
<td>PCI-E 3.0</td>
<td>x1<br />x16</td>
<td>8000 (код 128b/130b)</td>
<td>984,6<br />15 754</td>
</tr>
<tr>
<td>PCI-E 4.0</td>
<td>x1<br />x16</td>
<td>16000 (код 128b/130b)</td>
<td>1 969<br />15 754</td>
</tr>
<tr>
<td>PCI-E 5.0*<br />(* еще не принят)</td>
<td>x1<br />x16</td>
<td>32000 (код 128b/130b)</td>
<td>4 000<br />64 000</td>
</tr>
<tr>
<td>AGP(1x)</td>
<td>32</td>
<td>66</td>
<td>262,6</td>
</tr>
<tr>
<td>AGP (2x)</td>
<td>32</td>
<td>66x2</td>
<td>528,3</td>
</tr>
<tr>
<td>AGP (4x)</td>
<td>32</td>
<td>66x4</td>
<td>1 056,6</td>
</tr>
</table>

<h4>Интерфейс</h4>
<p>Внешние устройства к шинам подключаются посредством интерфейса.
Под интерфейсом (Interface — сопряжение) понимают совокупность различных
характеристик какого-либо периферийного устройства PC, определяющих организацию
обмена информацией между ним и центральным процессором. Это электрические
и временные параметры, набор управляющих сигналов, протокол обмена данными
и конструктивные особенности подключения. При этом обмен данными между
компонентами PC возможен только в случае совместимости их интерфейсов.</p>

<p>Принцип IBM-совместимости подразумевает стандартизацию
интерфейсов отдельных компонентов PC, что, в свою очередь, определяет гибкость
системы в целом, т. е. возможность по мере необходимости изменять конфигурацию
системы и подключать различные периферийные устройства. В случае несовместимости
интерфейсов (например, интерфейс системной шины и интерфейс винчестера)
используются контроллеры. Кроме того, гибкость и унификация системы достигается
за счет введения промежуточных стандартных интерфейсов, таких как интерфейсы
последовательной и параллельной передачи данных, являющиеся необходимыми
для работы наиболее важных периферийных устройств ввода и вывода.</p>
<h3><a name="Системные шины"></a>Системные шины</h3>
<p>Системная шина предназначена для обмена информацией между CPU, памятью и другими
устройствами, входящими в систему.</p>
<h4>Шины GTL+ и EV6</h4>
<p>Системная шина GTL+ (Р6) разработана корпорацией Intel для процессоров шестого поколения. Разрядность шины — 64 бита, а тактовая частота — 66, 100 и 133 МГц. Пропускная способность шины составляет 528, 800 и 1,06 Мбайт/с соответственно. На шине GTL+ "висят"
CPU, модули оперативной памяти, шина PCI и AGP (при их наличии в системе).</p>

<p><em>Шина EV6 </em>разработана компанией <em>DEC
(Digital Equipment Corpora-tion)</em> для CPU Alpha 21264. В мире PC
она используется корпорацией <em>AMD</em> для систем с <em>CPU K-7.
</em>Ниже перечислены основные ее отличия от шины <em>GTL+</em>.
<ul>
<li>Передача информации осуществляется на обоих
фронтах сигнала, что позволяет вдвое увеличить пропускную способность шины.
Спецификация шины позволяет повысить ее тактовую частоту до 377 МГц.</li>

<li>Шина является каналом взаимодействия CPU и Chipset,
причем для многопроцессорных систем каждому CPU выделяется отдельный канал.
Поэтому разрядность и тактовая частота шины памяти не зависят от аналогичных
характеристик шины EV6. Поскольку многие современные системы "общаются"
с памятью, минуя CPU, то появляется возможность использовать 128-разрядную
шину памяти, работающую с тактовой частотой, определяемой характеристикой
используемых модулей памяти (100, 133, 200 МГц).</li>
</ul>
<h3><a name="Шины"></a>Шины ввода/вывода</h3>
<p><em>Шина ISA (Industry Standard Architecture</em>,
Промышленная стандартная архитектура) долгие годы являлась стандартом в
области PC и считается самой "старой" в семействе шин, однако до недавнего
времени она использовалась даже в новейших моделях PC. Дело в том, что
у пользователей имеется еще множество периферийных устройств, использующих
стандарт ISA (модемы, сканеры, звуковые карты и т. п.), Для которых быстродействия
этой шины более чем достаточно.</p>

<p><em>Корпорация Intel </em>совместно с <em>Microsoft
</em>разработала стратегию (спецификации PC 98 и PC 99) постепенного
отказа от <em>шины ISA.</em> Согласно этой концепции на первом этапе
производителям материнских плат следует исключить слоты ISA, что должно
вынудить производителей карт расширения полностью перейти на производство
PCI-карт. На следующем этапе планировалось полностью отказаться от <em>ISA-разъемов</em>
на материнской плате. Предполагается подключать дисководы, мышь, кла-виатуру,
сканер и другие устрой-ства к <em>шине USB</em>, а для подключения,
например, винчестеров, приводов CD-ROM и DVD-ROM, видеокамер использовать
новую <em>шину IEEE 1394.</em></p>
<p class="center"><img src="image_1_2.jpg" height="350"></p>
<p class="center">Рисунок 4.2 - Слоты 16-разрядной и 8-разрядной шины ISA</p>

<h4>16-разрядная шина</h4>
<p>Если вы посмотрите на слот 16-разрядной шины, обозначаемой иногда <em>AT
BUS,</em> то увидите, что он состоит из двух частей, одна из которых
в точности соответствует слоту 8-разрядной шины XT, а на контакты второй
выведены линии для дополнительных адресов ввода/вывода, прерываний и каналов
DMA. На этом основании короткие 8-разрядные карты можно устанавливать
в 16-разрядный слот. Сделать это наоборот, конечно же, невозможно. Слоты
16- и 8-разрядной шины ISA показаны на рис 4.2.
Передача байта данных по шине ISA происходит
следующим образом. Сначала на адресной шине выставляется адрес ячейки RAM
или порта устройства ввода/вывода, куда следует передать байт, затем на
линии данных выставляется байт данных, по одной из линий шины управления
передается сигнал записи WR (строб записи). Причем контроль записи (проверка,
успели записаться данные или нет) не производится. Поэтому тактовая частота
шины ISA выбрана равной 8,33 МГц, чтобы даже самые медленные устройства
гарантированно успевали производить по шине обмен данными и командами.</p>

<p>Основная проблема шины ISA состоит в том, что при оптимальной
тактовой частоте процессоров 80386 и 80486 она является как бы "горлышком
бутылки" (Boutleneck — узкое место), поскольку данные не могут передаваться
по шине с той же скоростью, с какой их обрабатывает CPU. Поэтому процессор
в ожидании данных вынужден простаивать (цикл ожидания). Это и явилось причиной
появления шин других стандартов.</p>

<h4><a name="Шина PCI"></a>Шина PCI</h4>
<p><em>Шина PCI - Peripheral Component Interconnect</em>
была разработана <em>фирмой Intel </em>для своего нового высокопроизводительного
процессора <em>Pentium.</em> В современных материнских платах тактовая
частота шины PCI задается как половина тактовой частоты системной шины,
т. е. при тактовой частоте системной шины 66 МГц шина PCI будет работать
на частоте 33 МГц, при частоте системной шины 100 МГц — 50 МГц. Основополагающим
принципом, положенным в основу шины PCI, является применение так называемых
мостов (Bridges), которые осуществляют связь между шиной PCI и другими
шинами.</p>

<p>Важной особенностью шины PCI является то, что в ней реализован
принцип <em>Bus Mastering,</em> который подразумевает способность
внешнего устройства при пересылке данных управлять шиной (без участия CPU).
Во время передачи информации устройство, поддерживающее <em>Bus Mastering,</em>
захватывает шину и становится главным. При таком подходе центральный процессор
освобождается для выполнения других задач, пока происходит передача данных.
Применительно к устройствам <em>IDE - Integrated Drive
Electronics</em> (например, <em>винчестер, CD-ROM</em>) <em>Bus
Mastering IDE</em> означает наличие определенных схем на материнской
плате, позволяющих осуществлять передачу данных с жесткого диска в обход
CPU. Это особенно важно при использовании многозадачных операционных систем
типа <em>Windows 95/98, Windows NT, OS/2</em> и т. п.
<p class="center"><img src="image_1_3.jpg" height="881"></p>
<p class="center">Рисунок 4.3 - Архитектура шины PCI</p>
<p>В настоящее время <em>шина PCI </em>стала стандартом
среди шин ввода/вывода (рис. 4.3). Рассмотрим ее архитектуру несколько
подробнее.</p>
<p>В шине PCI используется совершенно отличный
от шины ISA способ передачи данных. Этот способ, называемый "способом рукопожатия",
заключается в том, что в системе определяются два устройства: инициатор
(Iniciator) и исполнитель (Target). Когда инициирующее устройство готово
к передаче, оно выставляет данные на линии данных и сопровождает их соответстующим
сигналом (Indicator Ready), при этом исполняющее (подчиненное) устройство
записывает данные в свои регистры и подает сигнал Target Ready, подтверждая
запись данных и готовность к приему следующих. Установка всех сигналов,
а также чтение/запись данных производятся строго в соответствии с тактовыми
импульсами шины, частота которых равна 33 МГц.</p>

<p>Основное преимущество PCI-технологии заключается в относительной
независимости отдельных компонентов системы. В соответствии с концепцией
PCI, передачей пакета данных управляет не CPU, а включенный между ним и
шиной PCI мост (Host Bridge Cashe/DRAM Controller). Процессор может продолжать
работу и тогда, когда происходит запись данных в RAM (или их считывание)
либо при обмене данными между двумя любыми компонентами системы.</p>

<p>В соответствии со спецификацией PCI 1.0 шина PCI — 32-разрядная,
a PCI 2.0 64-разрядная. Таким образом, полоса пропускания шины составляет,
соответственно, 33 МГц х (32 бит : 8) = 132 Мбайт/с и 33 МГц х (64 бит
: 8) = 264 Мбайт/с.</p>

<p>Шина PCI универсальна (или самодостаточна). Поскольку
системная шина и шина PCI соединены с помощью главного моста (Host-Bridge),
то последняя является самостоятельным устройстве и может использоваться
независимо от типа CPU.</p>

<p>В соответствии со спецификацией PCI 5.0, ширина шины
увеличена до 64 разрядов, слоты PCI имеют дополнительные контакты, на которые
подается напряжение 3,3 В. Большинство современных микросхем PC работает
при таком напряжении.</p>

<p>Система PCI использует принцип временного мультиплексирования,
т. е. когда для передачи данных и адресов применяются одни и те же линии.</p>

<p>Важным свойством шины PCI является ее интеллектуальность,
т. е. она в состоянии распознавать аппаратные средства и анализировать
конфигурации системы в соответствии с технологией <em>Plug&amp;Play</em>,
разработанной корпорацией <em>Intel</em>.</p>

<h4><a name="PCI-X"></a>Шина PCI-X</h4>

<p><em>PCI-X 1.0</em> — расширение шины PCI64 с добавлением двух новых частот работы, 100 и 133 МГц, а также механизма раздельных транзакций для улучшения производительности при одновременной работе нескольких устройств. Как правило, обратно совместима со всеми 3.3В и универсальными PCI-картами.</p>

<p>PCI-X карты обычно выполняются в 64-бит 3,3 В формате и имеют ограниченную обратную совместимость со слотами PCI64/66, а некоторые PCI-X карты — в универсальном формате и способны работать (хотя практической ценности это почти не имеет) в обычном PCI 2.2/2.3.</p>

<p>В сложных случаях для того, чтобы быть полностью уверенным в работоспособности комбинации из материнской платы и карты расширения, надо посмотреть таблицы совместимости (compatibility lists) производителей обоих устройств.</p>

<p><em>PCI-X 2.0</em> — дальнейшее расширение возможностей PCI-X 1.0; добавлены частоты 266 и 533 МГц, а также — коррекция ошибок чётности при передаче данных (ECC). Допускает расщепление на 4 независимых 16-битных шины, что применяется исключительно во встраиваемых и промышленных системах; сигнальное напряжение снижено до 1,5 В, но сохранена обратная совместимость разъёмов со всеми картами, использующими сигнальное напряжение 3,3 В.</p>

<p>В настоящее время для не профессионального сегмента рынка высокопроизводительных компьютеров (мощных рабочих станций и серверов начального уровня), в которых находит применение шина PCI-X, выпускается крайне мало материнских плат с поддержкой шины. Примером материнской платы для такого сегмента является ASUS P5K WS.</p>

<p>В профессиональном сегменте применяется в RAID-контроллерах, в SSD-накопителях под PCI-E</p>

<h3><a name="PCIe"></a>Шина PCI Express</h3>
<p>Разработка стандарта PCI Express была начата фирмой Intel после отказа от шины InfiniBand. Официально первая базовая спецификация PCI Express появилась в июле 2002 года. Развитием стандарта PCI Express занимается организация PCI Special Interest Group.</p>
<p>В отличие от стандарта PCI, использовавшего для передачи данных общую шину с подключением параллельно нескольких устройств, PCI Express, в общем случае, является пакетной сетью с топологией типа звезда.</p>

<p>Устройства PCI Express взаимодействуют между собой через среду, образованную коммутаторами, при этом каждое устройство напрямую связано соединением типа точка-точка с коммутатором.</p>

<p>Кроме того, шиной PCI Express поддерживается:</p>
<ul>
<li>горячая замена карт;</li>
<li>гарантированная полоса пропускания (QoS);</li>
<li>управление энергопотреблением;</li>
<li>контроль целостности передаваемых данных.</li>
</ul>
<p>Шина PCI Express нацелена на использование только в качестве локальной шины. Так как программная модель PCI Express во многом унаследована от PCI, то существующие системы и контроллеры могут быть доработаны для использования шины PCI Express заменой только физического уровня, без доработки программного обеспечения. Высокая пиковая производительность шины PCI Express позволяет использовать её вместо шин AGP и тем более PCI и PCI-X.[2] Де-факто PCI Express заменила эти шины в персональных компьютерах.</p>
<p><b>Разъёмы PCI Express</b></p>
<ul>
<li>MiniCard (Mini PCIe) — замена форм-фактора Mini PCI. На разъём Mini Card выведены шины: x1 PCIe, USB 2.0 и SMBus.</li>
<ul><li>M.2 - вторая версия Mini PCIe, до x4 PCIe и SATA.</li></ul>
<li>ExpressCard — подобен форм-фактору PCMCIA. На разъём ExpressCard выведены шины x1 PCIe и USB 2.0, карты ExpressCard поддерживают горячее подключение.</li>
<li>AdvancedTCA, MicroTCA — форм-фактор для модульного телекоммуникационного оборудования.
<li>Mobile PCI Express Module (MXM) — промышленный форм-фактор, созданный для ноутбуков фирмой NVIDIA. Его используют для подключения графических ускорителей.</li>
<li>Кабельные спецификации PCI Express позволяют доводить длину одного соединения до десятков метров, что делает возможным создание ЭВМ, периферийные устройства которой находятся на значительном удалении.</li>
<li>StackPC — спецификация для построения наращиваемых компьютерных систем. Данная спецификация описывает разъёмы расширения StackPC, FPE и их взаимное расположение.</li>
</ul>
<p class="center"><img src="image_1_4.jpg" /></p>
<p class="center">Рисунок 4.4 - RAID-контроллер SATA II с интерфейсом PCIe HighPoint RocketRAID 2320</p>

<h4><a name="AGP"></a>Шина AGP</h4>
<p>Несмотря на все преимущества шины PCI, ее
возможностей становится недостаточно в условиях растущей нагрузки на систему.
Причина заключается в том, что новое поколение графических микросхем работает
одновременно с трехмерной графикой и видео. Только для управления пользовательским
графическим интерфейсом требуется половина пропускной способности шины.
Очевидно, что одной шины PCI для пересылки графических и видеоданных недостаточно,
— в пределах графической подсистемы необходима дополнительная шина. Специально
разработанные для этой цели шины <em>VAFC (Vesa Advanced Feature Connector)</em>
со скоростью передачи данных около 20 Мбайт/с и <em>VMC (Vesa Media
Channel)</em> — 16 Мбайт/с не получили широкого распространения.</p>

<p>Чтобы, не меняя уже сложившийся стандарт на <em>шину PCI</em>, ускорить ввод/вывод данных на видеоадаптер и, кроме того,
увеличить производительность PC при обработке трехмерных изображений без
установки специализированных дорогостоящих двухпроцессорных видеоадаптеров,
в 1997 г. <em>фирмой Intel </em>был разработан стандарт на шину <em>AGP
(Accelerated Graphics Port).</em> <em>AGP</em> является каналом
передачи данных между видеоадаптерами и памятью <em>RAM</em>, а также
системной шиной процессора, при этом не пересекаясь с <em>шиной PCI</em>.
<em>Примечание. </em>Так как шина AGP соединяет
только два устройства (видеоадаптер и RAM), то фактически является не шиной,
а портом.
<em>Шина AGP </em>— это высокоскоростная локальная шина
ввода/вывода, предназначенная исключительно для нужд видеосистемы. Она
связывает ви-деоадаптер (<em>3D-акселератор</em>) с системной памятью
PC, поэтому на материнской плате имеется только <em>один разъем (слот)
AGP. </em>Поскольку <em>шину AGP</em> использует только одно устройство,
не возникает характерной для шины <em>PCI </em>проблемы арбитража
(когда несколько устройств одновременно требуют доступа к шине), что повышает
скорость обмена данными между видеоадаптером и системной памятью.

<p><em>Шина AGP </em>была разработана на основе архитектуры
шины PCI, поэтому она также является 32-разрядной. Вместе с тем, у нее
имеется ряд важных отличий от шины PCI, позволяющих в несколько раз увеличить
пропускную способность.
<ul>
<li>Использование более высоких тактовых частот
(режимы 2х, 4х);</li>
<li>Демультиплексирование (режим SBA);</li>
<li>Пакетная передача данных;</li>
<li>Режим прямого исполнения в системной памяти (DiME).</li>
</ul>
Рассмотрим эти особенности более подробно.</p>
<p><em>Режимы 2х и 4х.</em> Если шина PCI в стандартном
варианте (32-разрядная) имеет тактовую частоту 33 МГц, что обеспечивает
теоретически пропускную способность шины <em>PCI 33 х 32 = 1056 бит/с
= 132 Мбайт/с</em>, то шина AGP тактируется сигналом с частотой 66 МГц,
поэтому ее пропускная способность составляет <em>66 х 32 = 264 Мбайт/с</em>
(это соответствует так называемому <em>режиму 1х</em>). Помимо режима
1х, стандартом <em>AGP Revision 1.0</em> предусмотрен режим 2х, при
котором передача данных производится не только по переднему, но и по заднему
фронту тактового импульса. В режиме 2х эквивалентная тактовая частота составит
<em>132 МГц,</em> а пропускная способность —<em> 528 Мбайт/с.</em>
Заметим, что режим 2х идеально подходит для процессоров семейства<em>
Pentium</em> и старше, у которых внешняя шина данных, как известно,
является 64-разрядной (это позволяет за один такт выполнить две 32-разрядных
команды или обработать два 32-разрядных слова).</p>

<p>В последних версиях шины AGP (AGP Revision 2.0), использующих
пониженное напряжение питания, за один такт синхронизации удается выполнить
уже не две, а четыре передачи (режим 4х), при этом скорость передачи данных
через шину составляет около <em>1 Гбайт/с. </em>Кроме того, наиболее
современные видеоадаптеры, выполненные на основе прогрессивных технологий
0,25 мкм и 0,18 мкм, обычно устойчиво работают на более высоких частотах
<em>шины AGP</em>, чем 66 МГц (например, при использовании в <em>Chipset
Intel 440BX </em>тактовой частоты системной шины около <em>133 МГц</em>
вместо положенных <em>100 МГц</em> тактовая частота шины <em>AGP</em>,
определяемая как 66% частоты системной шины, составит не 66, а около 90
МГц). Таким образом, пропускная способность интерфейса <em>AGP</em>
значительно выше, чем интерфейса<em> PCI</em>.
<em>Pipelining — конвейерная (пакетная) передача
данных.</em> При обращении к памяти через шину ввода/вывода обязательно
возникают задержки, т. е. ме-жду моментом выставления кода адреса и моментом
получения кода данных проходит какое-то время. При обмене через <em>шину
PCI </em>эта задержка возникает при каждом обращении. <em>Шина AGP</em>,
в отличие от PCI, предусматривает pipelining — конвейерную (пакетную) передачу
данных (рис. 4.5), при которой новый запрос (код адреса) выставляется на
шине сразу же после предыдущего, т. е. запросы выстраиваются в очередь
(ее длина может достигать 256). Все запрошенные данные передаются по шине
также в виде непрерывного пакета. В результате этого задержка получения
данных может возникнуть только один раз, что значительно повышает скорость
обмена данными через шину AGP по сравнению с обменом через шину PCI.</p>
<p class="center"><img src="image_1_5.jpg" height="133" /></p>
<p class="center">Рисунок 4.5 - Конвейерная обработка данных на AGP</p>
<h4>Демультиплексирование</h4>
<p>Как известно, шина PCI является мультиплексированной (переключаемой): одни и те же 32 линии
<em>ADO—AD31</em> сначала используются для передачи кода адреса, а
затем — кода данных. Иногда такой режим называют <em>AD (Address — Data)</em>.
Шина AGP также может работать в режиме AD, однако
она допускает применение режима <em>SBA (Side-Band Addressing — Адресация
по боковой полосе)</em>, при котором для передачи кода адреса используются
восемь дополнительных линий разъема AGP, именуемых <em>SBO—SB7.</em>
Поскольку код адреса, как и код данных — 32-разрядный, то такое разделение
является частичным демультиплексированием (для полного демультиплексирования
надо выделить 32 линии вместо 8, а это весьма дорого).

<p><em>Режим SBA</em> используется только в режиме 2х,
причем при пакетной передаче. Для выполнения адресации в режиме <em>SBA
</em>используются три такта синхронизации (при этом, с учетом режима
2х, по проводам <em>SBO—SB7 </em>передается 6 байт). В течение первых
двух тактов передаются 4 байта адреса, а в течение третьего такта — 1 байт
длины запроса и 1 байт команды. Провода <em>ADO—AD31</em> шины <em>AGP</em>
в режиме <em>SBA </em>используются исключительно для передачи данных,
поэтому скорость передачи данных в данном режиме существенно выше, чем
в режиме <em>AD.</em></p>
<p>Режим прямого исполнения в системной памяти <em>(DiME).</em>
Коль скоро стандарт <em>AGP </em>был разработан для использования
видеоадаптером системной памяти, следует оговорить режимы ее использования.
Для видеоадаптера с ин-терфейсом AGP возможны два режима работы с системной
памятью: <em>DMA</em> и <em>DiME (DME)</em></p>.
<p class="center"><img src="image_1_6.jpg" height="606" /></p>
<p class="center">Рисунок 4.6 - Структурная схема видеосистемы на основе шины AGP</p>
<p>Традиционным является режим <em>DMA (Direct Memory Access
— Прямой доступ к памяти)</em>, причем он, как известно, используется
не только видео-адаптером, но и другими периферийными устройствами PC,
имеющими более или менее интеллектуальный контроллер (например, накопители
на магнитных дисках, звуковые карты и др.). Цель <em>режима DMA</em>
ясна из его названия — обеспечить прямой обмен данными между устройством
и системной памятью, минуя регистры центрального процессора (напомним,
что второй вариант носит название<em> Р1О — Программный ввод/вывод</em>).
Когда ЗD-акселератор работает в <em>режиме DMA</em>, основной для
него является локальная память (именно в ней производятся все операции
обработки текстур), а системная память ис-пользуется только в качестве
"хранилища", поэтому обмен данными по <em>шине AGP</em> в <em>режиме
DMA</em> ведется большими последовательными пакетами. Значительного
выигрыша в скорости работы по сравнению с интерфейсом РС1 в данном режиме
обычно не наблюдается.
<p>Совершенно иначе обстоит дело в <em>режиме DME </em>или <em>DiME</em> (Direct Memory Execution — Непосредственное
выполнение операций с текстурами в основной памяти компьютера). В этом
режиме локальная и системная память являются для графического процессора
ЗD-акселератора равноценными и адресуются одинаково. В результате появляется
возможность выполнить предварительную обработку текстуры в системной памяти,
а в локальную память загрузить только ее окончательный вариант. Это кардинальным
образом меняет характер информационного обмена — в режиме DiME обмен ведется
главным образом короткими пакетами. Именно в режиме <em>DiME</em>
радикально ускоряется выполнение операций с текстурами при их хранении
в системной памяти. В самом общем виде структурная схема видеосистемы на
основе AGP представлена на рис. 4.6.</p>
<h4><a name="USB"></a>Шина USB</h4>
<p>Спецификация периферийной шины <em>USB (Universal Serial Bus) </em>была
разработана фирмами — лидерами компьютерной и телекоммуникационной промышленности
— <em>Compaq, DEC, IBM, Intel,</em> <em>Microsoft, NEC и Northern
Telecom </em>— для подключения периферийных устройств вне корпуса PC.
Шина USB поддерживает технологию <em>Plug&amp;Play.</em> <em>Скорость
обмена </em>информацией по шине USB составляет <em>12 Мбит/с</em>. На новых материнских платах имеется специальный разъем для подключения <em>концентратора USB (USB-Hab).</em></p>
<p class="center"><img src="image_1_7.jpg" height="871" /></p>
<p class="center">Рисунок 4.7 - Архитектура шины USB</p>

<p>К компьютерам, оборудованным <em>шиной USB</em>, можно подсоединять периферийные устройства (клавиатуру, мышь,
джойстик, принтер и др.), не выключая питание. Как только устройство будет
подключено, автоматически осуществляется его конфигурирование. Все периферийные
устройства должны быть оборудованы <em>разъемами USB</em> и подключаться
к PC через отдельный выносной блок, именуемый <em>USB-хабом</em> или
концентратором, с помощью которого к PC можно подключить до <em>127 периферийных
устройств</em>. Архитектура шины USB представлена на рис. 4.7.
Для использования <em>шины USB</em> под управлением
<em>операционных систем Windows 95/ 98/2000,</em> <em>Windows NT
и OS/2 Warp </em>разработаны специальные драйверы. Согласно спецификациям
PC 98, PC 99 и PC 2001 корпорация Intel планирует полностью заменить <em>шину
ISA</em> <em>шиной USB</em> для подключения низкоскоростных периферийных
устройств ввода/вывода и <em>шиной FireWire (IEEE 1394)</em> для подключения
устройств хранения информации (CD-ROM, HDD и др.) и ввода видеоданных.</p>
<h4><a name="Шина SCSI"></a>Шина SCSI</h4>
<p>Шина <em>SCSI (Small Computer System Interface)</em>
обеспечивает <em>скорость </em>передачи данных до <em>320 Мбайт/с</em>
и предусматривает подключение к одному адаптеру до восьми устройств (винчестеры
и приводы CD-ROM SCSI, сканеры, фото- и видеокамеры и др.)
В отличие от рассмотренных выше шин, <em>шина
SCSI </em>реализована в виде кабельного шлейфа. С шиной <em>PC (ISA
или PCI)</em> шина <em>SCSI</em> связывается через <em>хост-адаптер
(Host Adapter)</em>. Каждое устройство, подключенное к шине, имеет свой
<em>идентификационный номер (ID)</em>. Обычно хост-адаптеру, который
должен иметь высший приоритет, назначается ID7. Любое устройство, подключенное
к шине SCSI, может инициировать обмен с другим устройством.
<p class="center"><img src="image_1_8.jpg" height="865" /></p>
<p class="center">Рисунок 4.8 - <em>Шина SCSI </em>с подключенными устройствами</p>
<p>Как видно из рис. 4.8, скорость обмена данными через интерфейс
<em>SCSI </em>ограничена производительностью шины ввода/вывода. Таким
образом, данные могут передаваться, например, по 16-разрядной <em>шине
SCSI </em>со скоростью до <em>20 Мбайт/с.</em></p>
<p>В сентябре 1998 г. появилась шина <em>Ultra3 SCSI,</em>
которая имеет 63 изменения по сравнению с предыдущими версиями. После выпуска
первых промышленных образцов новая спецификация получила название <em>Ultral60</em>.
Пропускная способность шины увеличилась до <em>160 Мбайт/с</em>. Основными
особенностями Ultral60 являются:</p>
<ul>
<li>двойная синхронизация при передаче данных <em>(Double
Transition Clocking)</em>;</li>
<li>контроль целостности данных за счет использования циклического
кода с избыточностью <em>(CRC - Cyclic Redundancy Check)</em></li>;
<li>контроль окружения <em>(Domain Validation)</em>,</li>
который заключается в проверке возможностей соединительных кабелей, терминаторов,
карт с целью обеспечения оптимальной производительности шины.</li>
</ul>
<h2><a name="Описание лабораторной установки"></a>4.3. Описание лабораторной установки</h2>
<p>В качестве лабораторной установки используются ПК, входящие
в состав кафедральной локальной сети, оснащенные операционными системами
<em>Windows</em> и прикладным программным обеспечением <em>AIDA64</em> и <em>SiSoft
Sandra Professional.</em></p>

<h2><a name="Порядок выполнения работы и методические"></a>4.4. Порядок выполнения работы и методические указания по ее выполнению</h2>
<p>1. Открыть программное приложение AIDA64.</p>
<p>2. На экране монитора будет отображено основное окно приложения.</p>
<p class="center"><img src="image_1_9.png" /></p>
<p class="center">Рисунок 4.9 - Окно приложения <em>AIDA64</em></p>
<p>3. В главном окне найти папку <em>Комп'ютер&rarr;DMI&rarr;Процесори.</em>
Дважды щелкните на папке <em>System Summary,</em> на экране появится
всплывающее окно вызываемой папки.</p>
<p>4. На основании данных, отображаемых в папке <em>System
Summary</em>, заполнить таблицу (табл. 4.2) основных элементов исследуемого<em>
компьютера (рабочей станции)</em>.</p>

<p>Таблица 4.2 - Основные компоненты компьютерной системы</p>
<div align="center">
<table cols="2" width="80%">
<tr>
<th>Параметр</th>
<th>Значение</th>
</tr>
<tr><td colspan="2"><h3 class="center">Материнская плата и процессор(ы)</h4></td></tr>
<tr><td colspan="2"><h4 class="center">1. Процессор(ы)</b></td><td>&nbsp;</h4></td></tr>
<tr><td>1.1. Наименование</td><td>DualCore Intel Core i3-4160</td></tr>
<tr><td>1.2. Тактовая частота</td><td>3600 МГц</td></tr>
<tr><td>1.3. Разрядность</td><td>64 бита</td></tr>
<tr><td>1.4. Количество ядер</td><td>2</td></tr>
<tr><td>1.5. Размеры кэш-памяти</td><td>L1 - 128 кБайт, L2 - 512 кБайт, L3 - 4096 кБайт</td></tr>
<tr><td colspan="2"><h4 class="center">2. Память</h4></td></tr>
<tr><td>2.1. Объем памяти</td><td>4096 Mбайт</td></tr>
<tr><td>2.2. Тактовая частота</td><td>1600 МГц</td></tr>
<tr><td>2.3. Разрядность</td><td>64 бит</td></tr>
<tr><td>2.4. Форм-фактор</td><td>DIMM</td></tr>
<tr><td>2.5. Тип</td><td>DDR3</td></tr>
<tr><td>2.6. Размещение</td><td>ChannelA-DIMM0</td></tr>
<tr><td colspan="2"><h4 class="center">3. Мосты</h4></td></tr>
<tr><td>3.1. Северный мост</td><td>Intel Haswell-DT IMC</td></tr>
<tr><td>3.2. Южный мост</td><td>Intel Lynx Point H81</td></tr>
<tr><td colspan="2"><h4 class="center">4. Шина PCI</h4></td></tr>
<tr><td>4.1. Устройства PCI</td><td>1. ADMtek AN983 Fast Ethernet Adapter<br />2. GeCube Radeon 9600 - Secondary Video Adapter<br />3. Intel 82801EB I/O Controller Hub 5 (ICH5) [A-2/A-3]<br />...</td></tr>
</table>
</div>
<p>4. Нарисовать схему архитектуры шин исследуемой системы и
подключить к ней все компоненты компьютера.</p>
<p>5 Результаты исследования (табл. 4.2 и структурную схему
шинной архитектуры компьютера) предъявить преподавателю по окончании выполнения
работы.</p>
<h2><a name="Содержание отчета"></a>4.5. Содержание отчета</h2>
<p>Отчет по работе должен содержать:
<ol>
<li>Цель работы.</li>
<li>Краткое описание состава и характеристики всех шин
исследуемой компьютерной системы.</li>
<li>Таблицу основных компонентов исследуемой компьютерной
системы.</li>
<li>Структурную схему шинной архитектуры исследуемой компьютерной
системы.</li>
<li>Выводы по работе.</li>
</ol>
<h2><a name="Контрольные вопросы и задания"></a>4.6. Контрольные вопросы и задания</h2>
<ol>
<li>Дать определение понятия <em>шины (магистрали) </em>и ее назначение.</li>
<li>Каким образом делятся <em>линии системной шины </em>в зависимости от типа передаваемых данных?</li>
<li>Назовите основные <em>характеристики шины</em>.</li>
<li>Как определяется<em> пропускная способность шины</em>?</li>
<li>Дайте определение понятия <em>интерфейса</em>.</li>
<li>Назовите основные <em>типы шин ввода/вывода</em>.</li>
<li>Охарактеризуйте основные особенности шины <em>PCI</em>.</li>
<li>Каким образом задается тактовая частота шины <em>PCI</em>?</li>
<li>Каково назначение высокоскоростной локальной шины ввода/вывода
<em>AGP</em>?</li>
<li>Какие компоненты компьютера могут быть подключены к шине <em>USB</em>?</li>
<li>Каким образом определяется пропускная способность шины <em>PCI Express</em>?</li>
<li>Какие устройства подключаются к шине <em>SCSI</em>?</li>
<li>Как разделяются <em>шины компьютера</em> по функциональному назначению?</li>
</ol>
</body>
</html>
