<!doctype html>
<head>
<meta charset="windows-1251">
<link rel=stylesheet href="../style.css">
<title>Central Processing Unit</title>
<link href="#2_1">
</head>
<body background="../Background.jpg">
<a href="../index.html">Содержание</a>
  <h1>Лабораторная работа 2. Центральный процессор</h1>

  <hr>
  <p><a href="#2_1">2.1. Цель работы </a></p>
  <p><a href="#2_2">2.2. Порядок выполнения работы</a></p>
  <p><a href="#2_3">2.3. Содержание отчета</a></p>
  <p><a href="#2_4">2.4. Изучение структурно-функциональной организации процессора</a></p>
  <p><a href="#2_4_1">2.4.1. Основные функции ЦП</a></p>
  <p><a href="#2_4_2">2.4.2. Структурная организация ЦП</a></p>
  <p><a href="#2_5">2.5. Контрольные вопросы и задания</a></p>
<hr>
<h2><a name="2_1"></a><b>2.1. Цель работы</h2>
<div style="float: right;"><img src="image_2_0.jpg" alt="CPU"></div>
<p>Изучение принципов структурно-функциональной организации центрального 
  процессора (ЦП) компьютера. Исследование функционирования ЦП при выполнении 
  различных команд.</p>
<h2><a name="2_2"></a>2.2. Порядок выполнения работы</h2>
<p>Студенты должны внимательно прочитать информационную часть работы, 
  уяснить основные функции ЦП, обобщенную структурную схему ЦП и принципы взаимодействия 
  его с остальными компонентами компьютерной системы, в частности, с оперативной 
  памятью. Особое внимание следует обратить на организацию внутренней памяти процессора.</p>
<p>При выполнении второй части работы (&quot;Моделирование&quot;) необходимо с помощью обучающей программы (../EXE/PC.exe) проанализировать структуру исследуемого процессора, выяснить назначение информационных связей, приведенных на схеме, и выполнить имитационное моделирование работы процессора при выполнении заданного набора команд (таблица 2.1). Этапы выполнения каждой команды должны быть детально проанализированы, построены структурные схемы алгоритмов и представлены в отчете.</p>
  <div>Таблица 2.1 - Варианты заданий</div>
  <table width="100%">
    <tr> 
      <th>Вариант</th>
      <th colspan="3">Набор команд</th>
    </tr>
    <tr> 
      <td>1</td>
      <td>MOV [Mem], [Reg]</td>
      <td>NEG [Reg]</td>
      <td>CMP [Reg], [Mem]</td>
    </tr>
    <tr> 
      <td>2</td>
      <td>MOV [Reg], [Mem]</td>
      <td>CMP [Reg1], [Reg2]</td>
      <td>DEC [Mem]</td>
    </tr>
    <tr> 
      <td>3</td>
      <td>ADD [Mem], [Reg]</td>
      <td>OR [Reg], [Reg2]</td>
      <td>MOV [Mem], [Reg]</td>
    </tr>
    <tr> 
      <td>4</td>
      <td>DEC [Reg]</td>
      <td>SUB [Reg], [Mem]</td>
      <td>OR [Mem], [Reg]</td>
    </tr>
    <tr> 
      <td>5</td>
      <td>INC [Mem]</td>
      <td>SUB [REG1], [REG2]</td>
      <td>MOV [Reg], [Mem]</td>
    </tr>
    <tr> 
      <td>6</td>
      <td>MOV [Mem], [Reg]</td>
      <td>NEG [Mem]</td>
      <td>OR [Reg], [Mem]</td>
    </tr>
    <tr> 
      <td>7</td>
      <td>MOV [Reg], [Mem]</td>
      <td>AND [Reg1], [Reg2]</td>
      <td>DEC [Mem]</td>
    </tr>
    <tr> 
      <td>8</td>
      <td>ADD [Reg1], [Reg2]</td>
      <td>CMP [Mem], [Reg]</td>
      <td>INC [Mem]</td>
    </tr>
    <tr> 
      <td>9</td>
      <td>DEC [Mem]</td>
      <td>ADD [Reg], [Mem]</td>
      <td>AND [Mem], [Reg]</td>
    </tr>
    <tr> 
      <td>10</td>
      <td>INC [Reg]</td>
      <td>SUB [Mem], [Reg]</td>
      <td>AND [Reg], [Mem]</td>
    </tr>
  </table>

<h3>2.3. <a name="2_3"></a>Содержание отчета</h3> 

  <p>Отчет по работе должен содержать цель работы, схему организации ЦП (из части 
    &quot;Моделирование&quot;) и ее описание, описание последовательности действий 
    процессора при выполнении каждой из заданных для исследования команд, структурные 
    схемы алгоритмов выполнения команд и выводы по работе.</p>

<h2>2.4.<a name="2_4"></a> Изучение структурно-функциональной организации процессора</h2>
<h3>2.4.1.<a name="2_4_1"></a> Основные функции ЦП</h3>
<p>При ознакомлении с организацией ЦП следует выделить его основные функции:</p>
<ul>
  <li> <b>Выборка команды</b>: ЦП читает команду из памяти;</li>
  <li> <b>Интерпретация команды</b>: команда должна быть декодирована с целью 
    задания необходимых действий процессора;</li>
  <li><b>Выборка данных</b>: при выполнении команды может потребоваться чтение 
    данных из памяти или получение их от устройства ввода-вывода;</li>
  <li> <b>Обработка данных</b>: при выполнении команды может потребоваться выполнение 
    некоторых арифметических или логических операций над данными;</li>
  <li> <b>Запоминание данных</b>: результаты обработки могут быть сохранены в 
    памяти или переданы в устройство ввода-вывода.</li>
</ul>
<p>Функционирование ЦП опредляется последовательностью команд, которые он выполняет. 
Эти команды называют <i>машинными командами</i> или <i>инструкциями</i>. Набор 
различных инструкций, которые процессор способен распознать и выполнить, представляет 
собой систему команд данного ЦПУ.</p>
<p>Каждая команда должна содержать информацию, достаточную для ее корректного 
  выполнения. Элементами команды являются: 
<ul>
  <li> <b>код операции (opcode)</b>: определяет конкретную операцию, которую должен 
    выполнить ЦП;</li>
  <li> <b>ссылка на операнд-источник</b>: исходное значение (или несколько значений) 
    данных, которые должен обработать процессор;</li>
  <li> <b>ссылка на операнд-приемник</b>: для сохранения результата выполненной 
    команды;</li>
  <li> <b>ссылка на следующую команду</b>.</li>
</ul>
<p class="center"><img src="image_2_1.jpg"  alt="Рисунок 2.1" /></p>
<p class="center">Рисунок 2.1 - Форматы машинных команд</p>
<p>Очередная команда выбирается из ячейки оперативной памяти или (при наличии виртуальной 
памяти) считывается из вторичной памяти (магнитного диска). В большинстве случаев 
следующая команда, подлежащая выборке, располагается непосредственно за текущей. 
При этом отпадает необходимость в указании явной ссылки на следующую команду. 
Ссылка должна присутствовать в команде только тогда, когда требуется изменить 
последовательность выполнения команд.</p>
<p>Операнд-источник и операнд-приемник могут располагаться в одной из трех областей: 
<ul>
  <li>главной или виртуальной памяти;</li>
  <li>регистрах ЦП;</li>
  <li>устройствах ввода-вывода.</li>
</ul>
<p>Команды в компьютере представляются последовательностью бит, разделенной на поля, 
соответствующие перечисленным элементам. Такое представление называют <i>форматом 
команды</i>. Так как двоичная форма, пригодная для использования в ЦП, неудобна 
для восприятия человеком, широко распространено символическое представление машинных 
команд. В этом случае коды операций представляются аббревиатурами, получившими 
название <i>мнемоники</i>. В таком же виде приводятся и ссылки на операнды.</p> 
<p>&nbsp;</p>
<p class="center"><img src="image_2_2.png" alt="Рисунок 2.2" /></p>
<p class="center">Рисунок 2.2 - Командный цикл</p>
<h3>2.4.2.<a name="2_4_2"></a> Структурная организация ЦП</h3>
<p>Необходимо учитывать, что в компьютере имеется чрезвычайно большое количество 
  ячеек оперативной памяти и (возможно) виртуальной, а также во внешних устройствах, 
  где могут располагаться данные. В то же время, длина команд обычно крайне ограничена. 
  Поэтому с целью достижения компромисса между диапазоном адресов, гибкостью и 
  сложностью механизма адресации и разрядностью команд существует ряд способов 
  адресации.</p>
<p>Очевидно то, что ЦП нуждается во временном хранении некоторых данных. Он должен 
  знать местоположение последней команды, что позволит ему определить расположение 
  следующей. При выполнении команды сама команда и обрабатываемые данные должны 
  быть временно сохранены внутри процессора. Следовательно, процессор должен иметь 
  внутреннюю память.</p>
  <p>&nbsp;</p>
<p class="center"><img src="image_2_3.png" alt="Рисунок 2.3" /></p> 
<p class="center">Рисунок 2.3 - Обобщенная структурная схема центрального процессора</p>
<p>На рисунке 2.3 представлена упрощенная схема ЦП и показана системная шина, 
  посредством которой процессор связан с остальными компонентами системы. На основании 
  такого интерфейса строятся системы с различными видами межсоединений компонентов.</p>
<p>Главными компонентами ЦП являются <i>арифметико-логическое устройство (АЛУ, 
  Arithmetic and Logic Unit - ALU)</i> и <i>устройство управления (УУ, control 
  unit - CU)</i>. АЛУ непосредстенно выполняет вычисления (преобразование данных). 
  Устройство управления реализует функции управления пересылками данных и команд 
  в или из ЦП и управления операциями АЛУ. Кроме указанных блоков, на рисунке 
  также показана <i>внутренняя память</i> небольшого объема, состоящая из ячеек, 
  именуемых регистрами.</p>
<p class="center"><img src="image_2_4.png" alt="Рисунок 2.4" /></p> 
<p class="center">Рисунок 2.4 - Структурная схема центрального процессора</p> 
<p>На рисунке 2.4 представлена более детализированная схема ЦП. На ней показаны 
  линии передачи данных и линии управляющих сигналов, включая внутреннюю шину 
  ЦП. <i>Внутренняя шина</i> предназначена для пересылки данных между различными 
  регистрами и АЛУ, так как АЛУ, по сути, обрабатывает данные только из внутренней 
  памяти процессора. На рисунке также приведены типичные базовые элементы АЛУ 
  (сдвигатель, регистр флагов, преобразователь кодов, блок выполнения и логических 
  операций). 
<h3>2.4.3.<a name="2_4_3"></a> Регистры процессора</h3>
<p>Следует отметить два типа регистров ЦП:</p>
<ul>
<li><b>Программно-доступные регистры (User-Visible Registers)</b>: используются 
  прикладными программами и позволяют сократить количество обращений к главной 
  памяти при их выполнении;</li>
<li><b>Регистры управления и состояния (Control and Status Registers)</b>: используются 
  устройстом управления а также (по привилегии) системным программным обеспечением</li>
</ul>
<p>При этом четкого разделения регистров на две эти категории обычно не наблюдается. 
  Например, в большинстве процессоров программный счетчик (Program Counter - PC) является 
  программно-доступным, а в некоторых - нет.</p>
<p>В различных системных решениях <i>программно-доступные регистры</i> можно разделить 
  на группы:
<ul>
<li><b>общего назначения</b> (РОН - General Purpose);</li> 
<li><b>адреса данных</b>;</li> 
<li><b>кодов условия</b> (Condition Codes).</li>
</ul>
<p>Регистры общего назначения могут использоваться программистом для выполнения 
  различных функций. В некоторых случаях имеет место их ортогональность к операциям, 
  т.е. любой РОН может хранить данные для любой операции из системы команд. Это 
  истинное использование РОНов. Однако чаще существуют ограничения, например, 
  в случае выделенных регистров для операций с плавающей запятой.</p>
<p>Иногда РОНы могут использоваться в качестве адресных (косвенная регистровая 
  адресация, адресация со смещением и т.д.), а вдругих случаях - наоборот, имеет 
  место частичное или полное разделение на регистры данных и регистры адреса. 
  Регистры данных служат только для хранения данных и не могут участвовать в формировании 
  адресов. Адресные регистры могут быть частью регистров общего назначения или 
  иметь четко выдленную адресную функцию:
<ul>
<li><b>Указатели сегментов</b>: В компьютерах с сегментной организацией памяти 
  сегментный регистр хранит адрес начала сегмента. Сегментов может быть несколько: 
  например, один для операционной системы и один для текущего процесса</li>
<li><b>Индексные регистры</b>: Используются в режимах адресации с индексированием 
  (или автоиндексироанием)</li>
<li><b>Указатель стека (Stack Pointer)</b>: Если пользователю доступна стековая 
  адресация, то обычно стек выделяется в памяти, а отдельный регистр указывает 
  на его вершину. Это в значительной степени упрощает адресацию за счет использования 
  специальных стековых команд типа PUSH, POP и др.</li>
</ul>
<p>Существуют определенные ограничения на длину регистров. Адресные регистры должны 
  иметь разрядность достаточную для хранения максимального адреса. Регистры данных 
  должны позволять хранить значения большей части типов данных. В некоторых компьютерах 
  для представления чисел повышенной разрядности используются несколько регистров.</p>
<p><i>Регистры кодов условия</i>, иногда называемые <i>регистрами флагов</i>, 
  являются как минимум частично программно-доступными. Коды условия - это биты, 
  устанавлиаемые аппаратными средствами ЦПУ по результатам операций. Например, 
  арифметическая операция может сформировать положительный отрицательный илинулевой 
  результат, а также вызвать переполнение. Коды условия обычно проверяются в процессе 
  выполения операций условных переходов.</p>
<p>Биты кодов условия находятся в одном или нескольких регистрах. Обычно они формируют 
  часть регистра управления. В общем случае, эти биты могут быть прочитаны специальной 
  инструкцией, но не могут непосредственно изменяться пользователем.</p> 
<p>К выполнению команды особое отношение имеют 4 <i>регистра управления и состояния</i>:</p>
<ul>
<li><b>программный счетчик (Program Counter - PC)</b>: содержит адрес команды, 
  подлежащей выборке; </li>
<li><b>регистр команд (Command Register - CR)</b>: содержит последнюю выбранную 
  команду; </li>
<li><b>регистр адреса памяти (Memory Address Register - MAR)</b>: содержит адрес 
  объекта в памяти; </li>
<li><b>регистр буфера памяти (Memory Buffer Register - MBR)</b>: содержит слово 
  данных, подлежащее записи в память, или последнее прочитанное из памяти</li>
</ul>
<p>Программный счетчик содержит адрес команды. Обычно содержимое прогаммного счетчика 
  обновляется ЦП после выборки очередной команды, таким образом, указывая на следующую 
  команду, подлежащую выполнению. Команды переходов также модифицируют счетчик. 
  Выбранная команда загружается в регистр команд, и производится анализ кода операции 
  и спецификаторов данных.</p>
<p>Обмен данными с памятью осуществляется посредством MAR и MBR. В системах с 
  шинной архитектурой MAR напрямую подключается к шине адреса, а MBR - к шине 
  данных. При этом обмен с программно-доступными регистрами происходит через MBR.</p>
<p>Все структуры ЦП содержат один или несколько регистров, называемых словом состояния 
  программы (program status word - PSW), которое обычно содержит код условия и 
  некоторые статусные данные:</p>
<ul>
<li><b> Sign</b>: знаковый бит результатпа последней арифметической операции;</li>
<li><b>Zero</b>: результат равен нулю; </li>
<li><b>Carry</b>: устанавливается в случае возникновения переноса (при сложении) 
  или заема (при вычитании) в/из старшего бита; </li>
<li><b>Equal</b>: устанавливается, если логическое сравнение операндов показало 
  их равенство; </li>
<li><b>Overflow</b>: индицирует арифметическое переполнение; </li>
<li><b>Interrupt Enable/Disable</b>: разрешение или запрещение прерываний; </li>
<li><b>Supervisor</b>: индицирует нахождение ЦП в режиме пользователя или в режиме 
  супервизора. Только в супервизорном режиме могут выполняться некоторые привилегированные 
  команды и могут быть доступны особые области памяти.</li>
</ul>
<h2>2.5<a name="2_5"></a> Контрольные вопросы и задания</h2>
<ol>
<li>Какие функции должен выполнять процессор? </li>
<li>Какую последовательность действий должен выполнить процессор при загрузке 
  команды? </li>
<li>Нарисуйте схему алгоритма выполнения инструкции процессором. </li>
<li>Какие шаги должен выполнить процессор при реализации командного цикла? </li>
<li>Для чего процессору необходима внутренняя память? </li>
<li>Каким образом процессор соединяется с остальными компонентами системы? </li>
<li>Какие функции выполняют регистры процессора? </li>
<li>Для чего используется внутренняя шина процессора? </li>
<li>Назовите доступные пользователю регистры. </li>
<li>Какие регистры принимают участие в цикле выполнения команды? </li>
<li>Перечислите функции программного счетчика.</li>
<li>Перечислите функции регистра команд. </li>
<li>Для чего применяется адресный регистр памяти?</li>
<li>Назовите функции буферного регистра памяти.</li>
<li>Что собой представляет слово состояния программы (ССП)?</li>
</ol>
</body>
</html>
